var t={d:(s,e)=>{for(var o in e)t.o(e,o)&&!t.o(s,o)&&Object.defineProperty(s,o,{enumerable:!0,get:e[o]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s)},s={};t.d(s,{A:()=>e});class e{onbin(t){}ontext(t){}onopen(){}onclose(){}onerror(t){}constructor(t,s,e,o=1e3){this.config(t,s,e,o)}config(t,s,e,o=1e3){this.ip=t,this.port=s,this.proto=e,this.tout=o}opened(){return this.ws&&this.ws.readyState==WebSocket.OPEN}open(){if(this.ws)return void this.ws.close();this.ws=new WebSocket(`ws://${this.ip}:${this.port}/`,[this.proto]),this.ws.binaryType="arraybuffer",this.reconnect=!0;let t=this.ws,s=setTimeout((()=>t.close()),this.tout);this.ws.onopen=()=>{clearTimeout(s),this.onopen()},this.ws.onclose=()=>{this.ws=null,clearTimeout(s),this.reconnect&&setTimeout((()=>this.open()),this.tout),this.onclose()},this.ws.onmessage=t=>{"string"==typeof t.data?this.ontext(t.data):this.onbin(t.data)},this.ws.onerror=t=>{this.onerror(t)}}close(){this.reconnect=!1,this.ws&&this.ws.close()}sendBin(t){this.opened()&&this.ws.send(t)}sendText(t){this.opened()&&this.ws.send(t)}}var o=s.A;export{o as default};